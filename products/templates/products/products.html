{% extends "base.html" %}
{% load static %}

{% block content %}


<section class="py-5">
    <div class="container">

        <!-- HEADER ROW -->
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4">
            <div>
                <h2 class="fw-bold mb-1">Our Products</h2>
                <p class="text-muted small mb-0">
                    Designed & Developed by <strong>Jermaine McKenna</strong>
                </p>
            </div>
         
<div class="container">
    <div class="row">

        <!-- ============================
             LEFT SIDEBAR FILTERS
        ============================= -->
        <div class="col-12 col-md-3 mb-4">
            <div class="card filters-card p-3 shadow-sm">
                <h5 class="fw-bold mb-3">Filters</h5>

                <form method="GET">

                    <!-- Categories -->
                    <h6 class="fw-semibold mb-2">Categories</h6>
                    <div class="form-check mb-1">
                        <input class="form-check-input" type="checkbox" name="category" value="T-Shirts" id="cat1">
                        <label class="form-check-label" for="cat1">T-Shirts</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input" type="checkbox" name="category" value="Hoodies" id="cat2">
                        <label class="form-check-label" for="cat2">Hoodies</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input" type="checkbox" name="category" value="Jackets" id="cat3">
                        <label class="form-check-label" for="cat3">Jackets</label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" name="category" value="Sweatshirts" id="cat4">
                        <label class="form-check-label" for="cat4">Sweatshirts</label>
                    </div>

                    <!-- Price Range -->
                    <h6 class="fw-semibold mb-2">Price Range</h6>
                    <div class="d-flex gap-2 mb-3">
                        <input type="number" name="min_price" class="form-control" placeholder="Min">
                        <input type="number" name="max_price" class="form-control" placeholder="Max">
                    </div>

                    <!-- Sorting -->
                    <h6 class="fw-semibold mb-2">Sort By</h6>
                    <select name="sort" class="form-select form-select-sm mb-3">
                        <option value="">-- None --</option>
                        <option value="price_asc">Price: Low → High</option>
                        <option value="price_desc">Price: High → Low</option>
                        <option value="name_asc">Name: A–Z</option>
                        <option value="name_desc">Name: Z–A</option>
                    </select>

                    <button class="btn btn-dark w-100 mb-2" type="submit">Apply</button>
                    <a href="/products/" class="btn btn-outline-secondary w-100">Clear</a>

                </form>
            </div>
        </div>
                <!-- KEEP YOUR EXISTING PRODUCT LOOP HERE -->
            </div>
        </div>

    </div>
</div>
        <!-- PRODUCTS GRID -->
        <div class="row g-4">
            {% for product in products %}
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="card product-card h-100">

                        <!-- Image -->
                        <div class="product-img-wrapper">
                            {% if product.image %}
                                <img src="{{ product.image.url }}" class="product-img" alt="{{ product.name }}">
                            {% elif product.image_url %}
                                <img src="{{ product.image_url }}" class="product-img" alt="{{ product.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/600x600?text=No+Image"
                                     class="product-img" alt="No image">
                            {% endif %}
                        </div>

                        <!-- Info -->
                        <div class="card-body text-center d-flex flex-column">
                            <h6 class="fw-semibold mb-1">{{ product.name }}</h6>
                            <p class="text-muted mb-2">£{{ product.price }}</p>
                            <a href="{% url 'product_detail' product.id %}" class="btn btn-dark mt-auto">
                                View Product
                            </a>
                        </div>

                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center text-muted mt-4">
                    No products match your filters yet.
                </div>
            {% endfor %}
        </div>

    </div>
</section>

{% endblock %}